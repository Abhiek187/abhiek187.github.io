var K=Object.defineProperty;var M=(e,t,r)=>t in e?K(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var d=(e,t,r)=>M(e,typeof t!="symbol"?t+"":t,r);function j(){return typeof navigator=="object"&&"userAgent"in navigator?navigator.userAgent:typeof process=="object"&&process.version!==void 0?`Node.js/${process.version.substr(1)} (${process.platform}; ${process.arch})`:"<environment undetectable>"}function S(e,t,r,s){if(typeof r!="function")throw new Error("method for before hook must be a function");return s||(s={}),Array.isArray(t)?t.reverse().reduce((n,a)=>S.bind(null,e,a,n,s),r)():Promise.resolve().then(()=>e.registry[t]?e.registry[t].reduce((n,a)=>a.hook.bind(null,n,s),r)():r(s))}function Z(e,t,r,s){const n=s;e.registry[r]||(e.registry[r]=[]),t==="before"&&(s=(a,i)=>Promise.resolve().then(n.bind(null,i)).then(a.bind(null,i))),t==="after"&&(s=(a,i)=>{let o;return Promise.resolve().then(a.bind(null,i)).then(c=>(o=c,n(o,i))).then(()=>o)}),t==="error"&&(s=(a,i)=>Promise.resolve().then(a.bind(null,i)).catch(o=>n(o,i))),e.registry[r].push({hook:s,orig:n})}function Q(e,t,r){if(!e.registry[t])return;const s=e.registry[t].map(n=>n.orig).indexOf(r);s!==-1&&e.registry[t].splice(s,1)}const P=Function.bind,C=P.bind(P);function B(e,t,r){const s=C(Q,null).apply(null,r?[t,r]:[t]);e.api={remove:s},e.remove=s,["before","error","after","wrap"].forEach(n=>{const a=r?[t,n,r]:[t,n];e[n]=e.api[n]=C(Z,null).apply(null,a)})}function Y(){const e=Symbol("Singular"),t={registry:{}},r=S.bind(null,t,e);return B(r,t,e),r}function ee(){const e={registry:{}},t=S.bind(null,e);return B(t,e),t}const te={Singular:Y,Collection:ee};var re="0.0.0-development",ne=`octokit-endpoint.js/${re} ${j()}`,se={method:"GET",baseUrl:"https://api.github.com",headers:{accept:"application/vnd.github.v3+json","user-agent":ne},mediaType:{format:""}};function ie(e){return e?Object.keys(e).reduce((t,r)=>(t[r.toLowerCase()]=e[r],t),{}):{}}function ae(e){if(typeof e!="object"||e===null||Object.prototype.toString.call(e)!=="[object Object]")return!1;const t=Object.getPrototypeOf(e);if(t===null)return!0;const r=Object.prototype.hasOwnProperty.call(t,"constructor")&&t.constructor;return typeof r=="function"&&r instanceof r&&Function.prototype.call(r)===Function.prototype.call(e)}function G(e,t){const r=Object.assign({},e);return Object.keys(t).forEach(s=>{ae(t[s])?s in e?r[s]=G(e[s],t[s]):Object.assign(r,{[s]:t[s]}):Object.assign(r,{[s]:t[s]})}),r}function _(e){for(const t in e)e[t]===void 0&&delete e[t];return e}function A(e,t,r){var n;if(typeof t=="string"){let[a,i]=t.split(" ");r=Object.assign(i?{method:a,url:i}:{url:a},r)}else r=Object.assign({},t);r.headers=ie(r.headers),_(r),_(r.headers);const s=G(e||{},r);return r.url==="/graphql"&&(e&&((n=e.mediaType.previews)!=null&&n.length)&&(s.mediaType.previews=e.mediaType.previews.filter(a=>!s.mediaType.previews.includes(a)).concat(s.mediaType.previews)),s.mediaType.previews=(s.mediaType.previews||[]).map(a=>a.replace(/-preview/,""))),s}function oe(e,t){const r=/\?/.test(e)?"&":"?",s=Object.keys(t);return s.length===0?e:e+r+s.map(n=>n==="q"?"q="+t.q.split("+").map(encodeURIComponent).join("+"):`${n}=${encodeURIComponent(t[n])}`).join("&")}var ce=/\{[^}]+\}/g;function ue(e){return e.replace(/^\W+|\W+$/g,"").split(/,/)}function le(e){const t=e.match(ce);return t?t.map(ue).reduce((r,s)=>r.concat(s),[]):[]}function x(e,t){const r={__proto__:null};for(const s of Object.keys(e))t.indexOf(s)===-1&&(r[s]=e[s]);return r}function z(e){return e.split(/(%[0-9A-Fa-f]{2})/g).map(function(t){return/%[0-9A-Fa-f]/.test(t)||(t=encodeURI(t).replace(/%5B/g,"[").replace(/%5D/g,"]")),t}).join("")}function w(e){return encodeURIComponent(e).replace(/[!'()*]/g,function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()})}function v(e,t,r){return t=e==="+"||e==="#"?z(t):w(t),r?w(r)+"="+t:t}function b(e){return e!=null}function O(e){return e===";"||e==="&"||e==="?"}function fe(e,t,r,s){var n=e[r],a=[];if(b(n)&&n!=="")if(typeof n=="string"||typeof n=="number"||typeof n=="boolean")n=n.toString(),s&&s!=="*"&&(n=n.substring(0,parseInt(s,10))),a.push(v(t,n,O(t)?r:""));else if(s==="*")Array.isArray(n)?n.filter(b).forEach(function(i){a.push(v(t,i,O(t)?r:""))}):Object.keys(n).forEach(function(i){b(n[i])&&a.push(v(t,n[i],i))});else{const i=[];Array.isArray(n)?n.filter(b).forEach(function(o){i.push(v(t,o))}):Object.keys(n).forEach(function(o){b(n[o])&&(i.push(w(o)),i.push(v(t,n[o].toString())))}),O(t)?a.push(w(r)+"="+i.join(",")):i.length!==0&&a.push(i.join(","))}else t===";"?b(n)&&a.push(w(r)):n===""&&(t==="&"||t==="?")?a.push(w(r)+"="):n===""&&a.push("");return a}function pe(e){return{expand:he.bind(null,e)}}function he(e,t){var r=["+","#",".","/",";","?","&"];return e=e.replace(/\{([^\{\}]+)\}|([^\{\}]+)/g,function(s,n,a){if(n){let o="";const c=[];if(r.indexOf(n.charAt(0))!==-1&&(o=n.charAt(0),n=n.substr(1)),n.split(/,/g).forEach(function(p){var u=/([^:\*]*)(?::(\d+)|(\*))?/.exec(p);c.push(fe(t,o,u[1],u[2]||u[3]))}),o&&o!=="+"){var i=",";return o==="?"?i="&":o!=="#"&&(i=o),(c.length!==0?o:"")+c.join(i)}else return c.join(",")}else return z(a)}),e==="/"?e:e.replace(/\/$/,"")}function W(e){var u;let t=e.method.toUpperCase(),r=(e.url||"/").replace(/:([a-z]\w+)/g,"{$1}"),s=Object.assign({},e.headers),n,a=x(e,["method","baseUrl","url","headers","request","mediaType"]);const i=le(r);r=pe(r).expand(a),/^http/.test(r)||(r=e.baseUrl+r);const o=Object.keys(e).filter(g=>i.includes(g)).concat("baseUrl"),c=x(a,o);if(!/application\/octet-stream/i.test(s.accept)&&(e.mediaType.format&&(s.accept=s.accept.split(/,/).map(g=>g.replace(/application\/vnd(\.\w+)(\.v3)?(\.\w+)?(\+json)?$/,`application/vnd$1$2.${e.mediaType.format}`)).join(",")),r.endsWith("/graphql")&&(u=e.mediaType.previews)!=null&&u.length)){const g=s.accept.match(/[\w-]+(?=-preview)/g)||[];s.accept=g.concat(e.mediaType.previews).map(h=>{const l=e.mediaType.format?`.${e.mediaType.format}`:"+json";return`application/vnd.github.${h}-preview${l}`}).join(",")}return["GET","HEAD"].includes(t)?r=oe(r,c):"data"in c?n=c.data:Object.keys(c).length&&(n=c),!s["content-type"]&&typeof n<"u"&&(s["content-type"]="application/json; charset=utf-8"),["PATCH","PUT"].includes(t)&&typeof n>"u"&&(n=""),Object.assign({method:t,url:r,headers:s},typeof n<"u"?{body:n}:null,e.request?{request:e.request}:null)}function de(e,t,r){return W(A(e,t,r))}function X(e,t){const r=A(e,t),s=de.bind(null,r);return Object.assign(s,{DEFAULTS:r,defaults:X.bind(null,r),merge:A.bind(null,r),parse:W})}var ge=X(null,se),m={},I;function ye(){if(I)return m;I=1;const e=function(){};e.prototype=Object.create(null);const t=/; *([!#$%&'*+.^\w`|~-]+)=("(?:[\v\u0020\u0021\u0023-\u005b\u005d-\u007e\u0080-\u00ff]|\\[\v\u0020-\u00ff])*"|[!#$%&'*+.^\w`|~-]+) */gu,r=/\\([\v\u0020-\u00ff])/gu,s=/^[!#$%&'*+.^\w|~-]+\/[!#$%&'*+.^\w|~-]+$/u,n={type:"",parameters:new e};Object.freeze(n.parameters),Object.freeze(n);function a(o){if(typeof o!="string")throw new TypeError("argument header is required and must be a string");let c=o.indexOf(";");const p=c!==-1?o.slice(0,c).trim():o.trim();if(s.test(p)===!1)throw new TypeError("invalid media type");const u={type:p.toLowerCase(),parameters:new e};if(c===-1)return u;let g,h,l;for(t.lastIndex=c;h=t.exec(o);){if(h.index!==c)throw new TypeError("invalid parameter format");c+=h[0].length,g=h[1].toLowerCase(),l=h[2],l[0]==='"'&&(l=l.slice(1,l.length-1),r.test(l)&&(l=l.replace(r,"$1"))),u.parameters[g]=l}if(c!==o.length)throw new TypeError("invalid parameter format");return u}function i(o){if(typeof o!="string")return n;let c=o.indexOf(";");const p=c!==-1?o.slice(0,c).trim():o.trim();if(s.test(p)===!1)return n;const u={type:p.toLowerCase(),parameters:new e};if(c===-1)return u;let g,h,l;for(t.lastIndex=c;h=t.exec(o);){if(h.index!==c)return n;c+=h[0].length,g=h[1].toLowerCase(),l=h[2],l[0]==='"'&&(l=l.slice(1,l.length-1),r.test(l)&&(l=l.replace(r,"$1"))),u.parameters[g]=l}return c!==o.length?n:u}return m.default={parse:a,safeParse:i},m.parse=a,m.safeParse=i,m.defaultContentType=n,m}var be=ye();class E extends Error{constructor(r,s,n){super(r);d(this,"name");d(this,"status");d(this,"request");d(this,"response");this.name="HttpError",this.status=Number.parseInt(s),Number.isNaN(this.status)&&(this.status=0),"response"in n&&(this.response=n.response);const a=Object.assign({},n.request);n.request.headers.authorization&&(a.headers=Object.assign({},n.request.headers,{authorization:n.request.headers.authorization.replace(/ .*$/," [REDACTED]")})),a.url=a.url.replace(/\bclient_secret=\w+/g,"client_secret=[REDACTED]").replace(/\baccess_token=\w+/g,"access_token=[REDACTED]"),this.request=a}}var me="0.0.0-development",we={headers:{"user-agent":`octokit-request.js/${me} ${j()}`}};function ve(e){if(typeof e!="object"||e===null||Object.prototype.toString.call(e)!=="[object Object]")return!1;const t=Object.getPrototypeOf(e);if(t===null)return!0;const r=Object.prototype.hasOwnProperty.call(t,"constructor")&&t.constructor;return typeof r=="function"&&r instanceof r&&Function.prototype.call(r)===Function.prototype.call(e)}async function D(e){var g,h,l,U,k;const t=((g=e.request)==null?void 0:g.fetch)||globalThis.fetch;if(!t)throw new Error("fetch is not set. Please pass a fetch implementation as new Octokit({ request: { fetch }}). Learn more at https://github.com/octokit/octokit.js/#fetch-missing");const r=((h=e.request)==null?void 0:h.log)||console,s=((l=e.request)==null?void 0:l.parseSuccessResponseBody)!==!1,n=ve(e.body)||Array.isArray(e.body)?JSON.stringify(e.body):e.body,a=Object.fromEntries(Object.entries(e.headers).map(([f,y])=>[f,String(y)]));let i;try{i=await t(e.url,{method:e.method,body:n,redirect:(U=e.request)==null?void 0:U.redirect,headers:a,signal:(k=e.request)==null?void 0:k.signal,...e.body&&{duplex:"half"}})}catch(f){let y="Unknown Error";if(f instanceof Error){if(f.name==="AbortError")throw f.status=500,f;y=f.message,f.name==="TypeError"&&"cause"in f&&(f.cause instanceof Error?y=f.cause.message:typeof f.cause=="string"&&(y=f.cause))}const N=new E(y,500,{request:e});throw N.cause=f,N}const o=i.status,c=i.url,p={};for(const[f,y]of i.headers)p[f]=y;const u={url:c,status:o,headers:p,data:""};if("deprecation"in p){const f=p.link&&p.link.match(/<([^>]+)>; rel="deprecation"/),y=f&&f.pop();r.warn(`[@octokit/request] "${e.method} ${e.url}" is deprecated. It is scheduled to be removed on ${p.sunset}${y?`. See ${y}`:""}`)}if(o===204||o===205)return u;if(e.method==="HEAD"){if(o<400)return u;throw new E(i.statusText,o,{response:u,request:e})}if(o===304)throw u.data=await T(i),new E("Not modified",o,{response:u,request:e});if(o>=400)throw u.data=await T(i),new E(Ee(u.data),o,{response:u,request:e});return u.data=s?await T(i):i.body,u}async function T(e){var s;const t=e.headers.get("content-type");if(!t)return e.text().catch(()=>"");const r=be.safeParse(t);if(r.type==="application/json"){let n="";try{return n=await e.text(),JSON.parse(n)}catch{return n}}else return r.type.startsWith("text/")||((s=r.parameters.charset)==null?void 0:s.toLowerCase())==="utf-8"?e.text().catch(()=>""):e.arrayBuffer().catch(()=>new ArrayBuffer(0))}function Ee(e){if(typeof e=="string")return e;if(e instanceof ArrayBuffer)return"Unknown error";if("message"in e){const t="documentation_url"in e?` - ${e.documentation_url}`:"";return Array.isArray(e.errors)?`${e.message}: ${e.errors.map(r=>JSON.stringify(r)).join(", ")}${t}`:`${e.message}${t}`}return`Unknown error: ${JSON.stringify(e)}`}function $(e,t){const r=e.defaults(t);return Object.assign(function(n,a){const i=r.merge(n,a);if(!i.request||!i.request.hook)return D(r.parse(i));const o=(c,p)=>D(r.parse(r.merge(c,p)));return Object.assign(o,{endpoint:r,defaults:$.bind(null,r)}),i.request.hook(o,i)},{endpoint:r,defaults:$.bind(null,r)})}var q=$(ge,we),je="0.0.0-development";function Oe(e){return`Request failed due to following response errors:
`+e.errors.map(t=>` - ${t.message}`).join(`
`)}var Te=class extends Error{constructor(t,r,s){super(Oe(s));d(this,"name","GraphqlResponseError");d(this,"errors");d(this,"data");this.request=t,this.headers=r,this.response=s,this.errors=s.errors,this.data=s.data,Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}},Ae=["method","baseUrl","url","headers","request","query","mediaType"],$e=["query","method","url"],L=/\/api\/v3\/?$/;function qe(e,t,r){if(r){if(typeof t=="string"&&"query"in r)return Promise.reject(new Error('[@octokit/graphql] "query" cannot be used as variable name'));for(const i in r)if($e.includes(i))return Promise.reject(new Error(`[@octokit/graphql] "${i}" cannot be used as variable name`))}const s=typeof t=="string"?Object.assign({query:t},r):t,n=Object.keys(s).reduce((i,o)=>Ae.includes(o)?(i[o]=s[o],i):(i.variables||(i.variables={}),i.variables[o]=s[o],i),{}),a=s.baseUrl||e.endpoint.DEFAULTS.baseUrl;return L.test(a)&&(n.url=a.replace(L,"/api/graphql")),e(n).then(i=>{if(i.data.errors){const o={};for(const c of Object.keys(i.headers))o[c]=i.headers[c];throw new Te(n,o,i.data)}return i.data.data})}function R(e,t){const r=e.defaults(t);return Object.assign((n,a)=>qe(r,n,a),{defaults:R.bind(null,r),endpoint:r.endpoint})}R(q,{headers:{"user-agent":`octokit-graphql.js/${je} ${j()}`},method:"POST",url:"/graphql"});function Se(e){return R(e,{method:"POST",url:"/graphql"})}var Re=/^v1\./,Ue=/^ghs_/,ke=/^ghu_/;async function Ne(e){const t=e.split(/\./).length===3,r=Re.test(e)||Ue.test(e),s=ke.test(e);return{type:"token",token:e,tokenType:t?"app":r?"installation":s?"user-to-server":"oauth"}}function Pe(e){return e.split(/\./).length===3?`bearer ${e}`:`token ${e}`}async function Ce(e,t,r,s){const n=t.endpoint.merge(r,s);return n.headers.authorization=Pe(e),t(n)}var _e=function(t){if(!t)throw new Error("[@octokit/auth-token] No token passed to createTokenAuth");if(typeof t!="string")throw new Error("[@octokit/auth-token] Token passed to createTokenAuth is not a string");return t=t.replace(/^(token|bearer) +/i,""),Object.assign(Ne.bind(null,t),{hook:Ce.bind(null,t)})};const J="6.1.3",F=()=>{},xe=console.warn.bind(console),Ie=console.error.bind(console),H=`octokit-core.js/${J} ${j()}`;class V{constructor(t={}){d(this,"request");d(this,"graphql");d(this,"log");d(this,"hook");d(this,"auth");const r=new te.Collection,s={baseUrl:q.endpoint.DEFAULTS.baseUrl,headers:{},request:Object.assign({},t.request,{hook:r.bind(null,"request")}),mediaType:{previews:[],format:""}};if(s.headers["user-agent"]=t.userAgent?`${t.userAgent} ${H}`:H,t.baseUrl&&(s.baseUrl=t.baseUrl),t.previews&&(s.mediaType.previews=t.previews),t.timeZone&&(s.headers["time-zone"]=t.timeZone),this.request=q.defaults(s),this.graphql=Se(this.request).defaults(s),this.log=Object.assign({debug:F,info:F,warn:xe,error:Ie},t.log),this.hook=r,t.authStrategy){const{authStrategy:a,...i}=t,o=a(Object.assign({request:this.request,log:this.log,octokit:this,octokitOptions:i},t.auth));r.wrap("request",o.hook),this.auth=o}else if(!t.auth)this.auth=async()=>({type:"unauthenticated"});else{const a=_e(t.auth);r.wrap("request",a.hook),this.auth=a}const n=this.constructor;for(let a=0;a<n.plugins.length;++a)Object.assign(this,n.plugins[a](this,t))}static defaults(t){return class extends this{constructor(...s){const n=s[0]||{};if(typeof t=="function"){super(t(n));return}super(Object.assign({},t,n,n.userAgent&&t.userAgent?{userAgent:`${n.userAgent} ${t.userAgent}`}:null))}}}static plugin(...t){var n;const r=this.plugins;return n=class extends this{},d(n,"plugins",r.concat(t.filter(a=>!r.includes(a)))),n}}d(V,"VERSION",J),d(V,"plugins",[]);export{V as Octokit};
