var X=Object.defineProperty;var J=(e,t,r)=>t in e?X(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var f=(e,t,r)=>J(e,typeof t!="symbol"?t+"":t,r);function E(){return typeof navigator=="object"&&"userAgent"in navigator?navigator.userAgent:typeof process=="object"&&process.version!==void 0?`Node.js/${process.version.substr(1)} (${process.platform}; ${process.arch})`:"<environment undetectable>"}function q(e,t,r,s){if(typeof r!="function")throw new Error("method for before hook must be a function");return s||(s={}),Array.isArray(t)?t.reverse().reduce((n,o)=>q.bind(null,e,o,n,s),r)():Promise.resolve().then(()=>e.registry[t]?e.registry[t].reduce((n,o)=>o.hook.bind(null,n,s),r)():r(s))}function K(e,t,r,s){const n=s;e.registry[r]||(e.registry[r]=[]),t==="before"&&(s=(o,i)=>Promise.resolve().then(n.bind(null,i)).then(o.bind(null,i))),t==="after"&&(s=(o,i)=>{let c;return Promise.resolve().then(o.bind(null,i)).then(a=>(c=a,n(c,i))).then(()=>c)}),t==="error"&&(s=(o,i)=>Promise.resolve().then(o.bind(null,i)).catch(c=>n(c,i))),e.registry[r].push({hook:s,orig:n})}function M(e,t,r){if(!e.registry[t])return;const s=e.registry[t].map(n=>n.orig).indexOf(r);s!==-1&&e.registry[t].splice(s,1)}const _=Function.bind,N=_.bind(_);function L(e,t,r){const s=N(M,null).apply(null,r?[t,r]:[t]);e.api={remove:s},e.remove=s,["before","error","after","wrap"].forEach(n=>{const o=r?[t,n,r]:[t,n];e[n]=e.api[n]=N(K,null).apply(null,o)})}function Z(){const e=Symbol("Singular"),t={registry:{}},r=q.bind(null,t,e);return L(r,t,e),r}function Q(){const e={registry:{}},t=q.bind(null,e);return L(t,e),t}const Y={Singular:Z,Collection:Q};var ee="0.0.0-development",te=`octokit-endpoint.js/${ee} ${E()}`,re={method:"GET",baseUrl:"https://api.github.com",headers:{accept:"application/vnd.github.v3+json","user-agent":te},mediaType:{format:""}};function ne(e){return e?Object.keys(e).reduce((t,r)=>(t[r.toLowerCase()]=e[r],t),{}):{}}function se(e){if(typeof e!="object"||e===null||Object.prototype.toString.call(e)!=="[object Object]")return!1;const t=Object.getPrototypeOf(e);if(t===null)return!0;const r=Object.prototype.hasOwnProperty.call(t,"constructor")&&t.constructor;return typeof r=="function"&&r instanceof r&&Function.prototype.call(r)===Function.prototype.call(e)}function V(e,t){const r=Object.assign({},e);return Object.keys(t).forEach(s=>{se(t[s])?s in e?r[s]=V(e[s],t[s]):Object.assign(r,{[s]:t[s]}):Object.assign(r,{[s]:t[s]})}),r}function D(e){for(const t in e)e[t]===void 0&&delete e[t];return e}function O(e,t,r){var n;if(typeof t=="string"){let[o,i]=t.split(" ");r=Object.assign(i?{method:o,url:i}:{url:o},r)}else r=Object.assign({},t);r.headers=ne(r.headers),D(r),D(r.headers);const s=V(e||{},r);return r.url==="/graphql"&&(e&&((n=e.mediaType.previews)!=null&&n.length)&&(s.mediaType.previews=e.mediaType.previews.filter(o=>!s.mediaType.previews.includes(o)).concat(s.mediaType.previews)),s.mediaType.previews=(s.mediaType.previews||[]).map(o=>o.replace(/-preview/,""))),s}function ie(e,t){const r=/\?/.test(e)?"&":"?",s=Object.keys(t);return s.length===0?e:e+r+s.map(n=>n==="q"?"q="+t.q.split("+").map(encodeURIComponent).join("+"):`${n}=${encodeURIComponent(t[n])}`).join("&")}var oe=/\{[^}]+\}/g;function ce(e){return e.replace(/^\W+|\W+$/g,"").split(/,/)}function ae(e){const t=e.match(oe);return t?t.map(ce).reduce((r,s)=>r.concat(s),[]):[]}function I(e,t){const r={__proto__:null};for(const s of Object.keys(e))t.indexOf(s)===-1&&(r[s]=e[s]);return r}function B(e){return e.split(/(%[0-9A-Fa-f]{2})/g).map(function(t){return/%[0-9A-Fa-f]/.test(t)||(t=encodeURI(t).replace(/%5B/g,"[").replace(/%5D/g,"]")),t}).join("")}function b(e){return encodeURIComponent(e).replace(/[!'()*]/g,function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()})}function y(e,t,r){return t=e==="+"||e==="#"?B(t):b(t),r?b(r)+"="+t:t}function g(e){return e!=null}function j(e){return e===";"||e==="&"||e==="?"}function ue(e,t,r,s){var n=e[r],o=[];if(g(n)&&n!=="")if(typeof n=="string"||typeof n=="number"||typeof n=="boolean")n=n.toString(),s&&s!=="*"&&(n=n.substring(0,parseInt(s,10))),o.push(y(t,n,j(t)?r:""));else if(s==="*")Array.isArray(n)?n.filter(g).forEach(function(i){o.push(y(t,i,j(t)?r:""))}):Object.keys(n).forEach(function(i){g(n[i])&&o.push(y(t,n[i],i))});else{const i=[];Array.isArray(n)?n.filter(g).forEach(function(c){i.push(y(t,c))}):Object.keys(n).forEach(function(c){g(n[c])&&(i.push(b(c)),i.push(y(t,n[c].toString())))}),j(t)?o.push(b(r)+"="+i.join(",")):i.length!==0&&o.push(i.join(","))}else t===";"?g(n)&&o.push(b(r)):n===""&&(t==="&"||t==="?")?o.push(b(r)+"="):n===""&&o.push("");return o}function le(e){return{expand:fe.bind(null,e)}}function fe(e,t){var r=["+","#",".","/",";","?","&"];return e=e.replace(/\{([^\{\}]+)\}|([^\{\}]+)/g,function(s,n,o){if(n){let c="";const a=[];if(r.indexOf(n.charAt(0))!==-1&&(c=n.charAt(0),n=n.substr(1)),n.split(/,/g).forEach(function(h){var l=/([^:\*]*)(?::(\d+)|(\*))?/.exec(h);a.push(ue(t,c,l[1],l[2]||l[3]))}),c&&c!=="+"){var i=",";return c==="?"?i="&":c!=="#"&&(i=c),(a.length!==0?c:"")+a.join(i)}else return a.join(",")}else return B(o)}),e==="/"?e:e.replace(/\/$/,"")}function G(e){var l;let t=e.method.toUpperCase(),r=(e.url||"/").replace(/:([a-z]\w+)/g,"{$1}"),s=Object.assign({},e.headers),n,o=I(e,["method","baseUrl","url","headers","request","mediaType"]);const i=ae(r);r=le(r).expand(o),/^http/.test(r)||(r=e.baseUrl+r);const c=Object.keys(e).filter(p=>i.includes(p)).concat("baseUrl"),a=I(o,c);if(!/application\/octet-stream/i.test(s.accept)&&(e.mediaType.format&&(s.accept=s.accept.split(/,/).map(p=>p.replace(/application\/vnd(\.\w+)(\.v3)?(\.\w+)?(\+json)?$/,`application/vnd$1$2.${e.mediaType.format}`)).join(",")),r.endsWith("/graphql")&&(l=e.mediaType.previews)!=null&&l.length)){const p=s.accept.match(/[\w-]+(?=-preview)/g)||[];s.accept=p.concat(e.mediaType.previews).map(m=>{const w=e.mediaType.format?`.${e.mediaType.format}`:"+json";return`application/vnd.github.${m}-preview${w}`}).join(",")}return["GET","HEAD"].includes(t)?r=ie(r,a):"data"in a?n=a.data:Object.keys(a).length&&(n=a),!s["content-type"]&&typeof n<"u"&&(s["content-type"]="application/json; charset=utf-8"),["PATCH","PUT"].includes(t)&&typeof n>"u"&&(n=""),Object.assign({method:t,url:r,headers:s},typeof n<"u"?{body:n}:null,e.request?{request:e.request}:null)}function he(e,t,r){return G(O(e,t,r))}function W(e,t){const r=O(e,t),s=he.bind(null,r);return Object.assign(s,{DEFAULTS:r,defaults:W.bind(null,r),merge:O.bind(null,r),parse:G})}var de=W(null,re);class v extends Error{constructor(r,s,n){super(r);f(this,"name");f(this,"status");f(this,"request");f(this,"response");this.name="HttpError",this.status=Number.parseInt(s),Number.isNaN(this.status)&&(this.status=0),"response"in n&&(this.response=n.response);const o=Object.assign({},n.request);n.request.headers.authorization&&(o.headers=Object.assign({},n.request.headers,{authorization:n.request.headers.authorization.replace(/ .*$/," [REDACTED]")})),o.url=o.url.replace(/\bclient_secret=\w+/g,"client_secret=[REDACTED]").replace(/\baccess_token=\w+/g,"access_token=[REDACTED]"),this.request=o}}var pe="0.0.0-development",ge={headers:{"user-agent":`octokit-request.js/${pe} ${E()}`}};function be(e){if(typeof e!="object"||e===null||Object.prototype.toString.call(e)!=="[object Object]")return!1;const t=Object.getPrototypeOf(e);if(t===null)return!0;const r=Object.prototype.hasOwnProperty.call(t,"constructor")&&t.constructor;return typeof r=="function"&&r instanceof r&&Function.prototype.call(r)===Function.prototype.call(e)}async function P(e){var p,m,w,R,U;const t=((p=e.request)==null?void 0:p.fetch)||globalThis.fetch;if(!t)throw new Error("fetch is not set. Please pass a fetch implementation as new Octokit({ request: { fetch }}). Learn more at https://github.com/octokit/octokit.js/#fetch-missing");const r=((m=e.request)==null?void 0:m.log)||console,s=((w=e.request)==null?void 0:w.parseSuccessResponseBody)!==!1,n=be(e.body)||Array.isArray(e.body)?JSON.stringify(e.body):e.body,o=Object.fromEntries(Object.entries(e.headers).map(([u,d])=>[u,String(d)]));let i;try{i=await t(e.url,{method:e.method,body:n,redirect:(R=e.request)==null?void 0:R.redirect,headers:o,signal:(U=e.request)==null?void 0:U.signal,...e.body&&{duplex:"half"}})}catch(u){let d="Unknown Error";if(u instanceof Error){if(u.name==="AbortError")throw u.status=500,u;d=u.message,u.name==="TypeError"&&"cause"in u&&(u.cause instanceof Error?d=u.cause.message:typeof u.cause=="string"&&(d=u.cause))}const k=new v(d,500,{request:e});throw k.cause=u,k}const c=i.status,a=i.url,h={};for(const[u,d]of i.headers)h[u]=d;const l={url:a,status:c,headers:h,data:""};if("deprecation"in h){const u=h.link&&h.link.match(/<([^>]+)>; rel="deprecation"/),d=u&&u.pop();r.warn(`[@octokit/request] "${e.method} ${e.url}" is deprecated. It is scheduled to be removed on ${h.sunset}${d?`. See ${d}`:""}`)}if(c===204||c===205)return l;if(e.method==="HEAD"){if(c<400)return l;throw new v(i.statusText,c,{response:l,request:e})}if(c===304)throw l.data=await A(i),new v("Not modified",c,{response:l,request:e});if(c>=400)throw l.data=await A(i),new v(ye(l.data),c,{response:l,request:e});return l.data=s?await A(i):i.body,l}async function A(e){const t=e.headers.get("content-type");return/application\/json/.test(t)?e.json().catch(()=>e.text()).catch(()=>""):!t||/^text\/|charset=utf-8$/.test(t)?e.text():e.arrayBuffer()}function ye(e){if(typeof e=="string")return e;if(e instanceof ArrayBuffer)return"Unknown error";if("message"in e){const t="documentation_url"in e?` - ${e.documentation_url}`:"";return Array.isArray(e.errors)?`${e.message}: ${e.errors.map(r=>JSON.stringify(r)).join(", ")}${t}`:`${e.message}${t}`}return`Unknown error: ${JSON.stringify(e)}`}function T(e,t){const r=e.defaults(t);return Object.assign(function(n,o){const i=r.merge(n,o);if(!i.request||!i.request.hook)return P(r.parse(i));const c=(a,h)=>P(r.parse(r.merge(a,h)));return Object.assign(c,{endpoint:r,defaults:T.bind(null,r)}),i.request.hook(c,i)},{endpoint:r,defaults:T.bind(null,r)})}var $=T(de,ge),me="0.0.0-development";function we(e){return`Request failed due to following response errors:
`+e.errors.map(t=>` - ${t.message}`).join(`
`)}var ve=class extends Error{constructor(t,r,s){super(we(s));f(this,"name","GraphqlResponseError");f(this,"errors");f(this,"data");this.request=t,this.headers=r,this.response=s,this.errors=s.errors,this.data=s.data,Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}},Ee=["method","baseUrl","url","headers","request","query","mediaType"],je=["query","method","url"],C=/\/api\/v3\/?$/;function Ae(e,t,r){if(r){if(typeof t=="string"&&"query"in r)return Promise.reject(new Error('[@octokit/graphql] "query" cannot be used as variable name'));for(const i in r)if(je.includes(i))return Promise.reject(new Error(`[@octokit/graphql] "${i}" cannot be used as variable name`))}const s=typeof t=="string"?Object.assign({query:t},r):t,n=Object.keys(s).reduce((i,c)=>Ee.includes(c)?(i[c]=s[c],i):(i.variables||(i.variables={}),i.variables[c]=s[c],i),{}),o=s.baseUrl||e.endpoint.DEFAULTS.baseUrl;return C.test(o)&&(n.url=o.replace(C,"/api/graphql")),e(n).then(i=>{if(i.data.errors){const c={};for(const a of Object.keys(i.headers))c[a]=i.headers[a];throw new ve(n,c,i.data)}return i.data.data})}function S(e,t){const r=e.defaults(t);return Object.assign((n,o)=>Ae(r,n,o),{defaults:S.bind(null,r),endpoint:r.endpoint})}S($,{headers:{"user-agent":`octokit-graphql.js/${me} ${E()}`},method:"POST",url:"/graphql"});function Oe(e){return S(e,{method:"POST",url:"/graphql"})}var Te=/^v1\./,$e=/^ghs_/,qe=/^ghu_/;async function Se(e){const t=e.split(/\./).length===3,r=Te.test(e)||$e.test(e),s=qe.test(e);return{type:"token",token:e,tokenType:t?"app":r?"installation":s?"user-to-server":"oauth"}}function Re(e){return e.split(/\./).length===3?`bearer ${e}`:`token ${e}`}async function Ue(e,t,r,s){const n=t.endpoint.merge(r,s);return n.headers.authorization=Re(e),t(n)}var ke=function(t){if(!t)throw new Error("[@octokit/auth-token] No token passed to createTokenAuth");if(typeof t!="string")throw new Error("[@octokit/auth-token] Token passed to createTokenAuth is not a string");return t=t.replace(/^(token|bearer) +/i,""),Object.assign(Se.bind(null,t),{hook:Ue.bind(null,t)})};const z="6.1.2",x=()=>{},_e=console.warn.bind(console),Ne=console.error.bind(console),F=`octokit-core.js/${z} ${E()}`;class H{constructor(t={}){f(this,"request");f(this,"graphql");f(this,"log");f(this,"hook");f(this,"auth");const r=new Y.Collection,s={baseUrl:$.endpoint.DEFAULTS.baseUrl,headers:{},request:Object.assign({},t.request,{hook:r.bind(null,"request")}),mediaType:{previews:[],format:""}};if(s.headers["user-agent"]=t.userAgent?`${t.userAgent} ${F}`:F,t.baseUrl&&(s.baseUrl=t.baseUrl),t.previews&&(s.mediaType.previews=t.previews),t.timeZone&&(s.headers["time-zone"]=t.timeZone),this.request=$.defaults(s),this.graphql=Oe(this.request).defaults(s),this.log=Object.assign({debug:x,info:x,warn:_e,error:Ne},t.log),this.hook=r,t.authStrategy){const{authStrategy:o,...i}=t,c=o(Object.assign({request:this.request,log:this.log,octokit:this,octokitOptions:i},t.auth));r.wrap("request",c.hook),this.auth=c}else if(!t.auth)this.auth=async()=>({type:"unauthenticated"});else{const o=ke(t.auth);r.wrap("request",o.hook),this.auth=o}const n=this.constructor;for(let o=0;o<n.plugins.length;++o)Object.assign(this,n.plugins[o](this,t))}static defaults(t){return class extends this{constructor(...s){const n=s[0]||{};if(typeof t=="function"){super(t(n));return}super(Object.assign({},t,n,n.userAgent&&t.userAgent?{userAgent:`${n.userAgent} ${t.userAgent}`}:null))}}}static plugin(...t){var n;const r=this.plugins;return n=class extends this{},f(n,"plugins",r.concat(t.filter(o=>!r.includes(o)))),n}}f(H,"VERSION",z),f(H,"plugins",[]);export{H as Octokit};
